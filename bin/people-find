#!/bin/sh -eu

PROG=find-package

fatal()
{
	echo "$PROG: $*" >&2
	exit 1
}

usage()
{
	echo "$PROG: $*" >&2
	echo "usage: $PROG <pattern>" >&2
	exit 1
}

[ "$#" -ge 1 ] ||
	usage 'Not enough arguments.'
[ "$#" -eq 1 ] ||
	usage 'Too many arguments.'

[ -n "${USER:-}" ] ||
	fatal 'USER undefined'

[ -n "$1" ] || 
	fatal 'invalid pattern'

cd /people
exec find [a-z]*/packages/ -mindepth 1 -maxdepth 1 -type d \( -name "$1" -or -name "$1.git" \) -print

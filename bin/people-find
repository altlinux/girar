#!/bin/sh -eu

. "@CMDDIR@/giter-sh-functions"

PROG=find-package

usage()
{
	echo "$PROG: $*" >&2
	echo "usage: $PROG <pattern>" >&2
	exit 1
}

[ "$#" -ge 1 ] ||
	usage 'Not enough arguments.'
[ "$#" -eq 1 ] ||
	usage 'Too many arguments.'

[ -n "$1" ] || 
	fatal 'invalid pattern'

[ -n "${GITER_HOME:-}" ] ||
	fatal 'GITER_HOME undefined'

cd "$GITER_HOME"
for d in [a-z]*; do
	[ -d "$d" ] || continue
	find "$GITER_HOME/$d/packages/" -mindepth 1 -maxdepth 1 -type d \
		\( -name "$1" -or -name "$1.git" \) -print ||:
done

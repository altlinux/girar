#!/bin/sh -efu

. girar-sh-functions

usage()
{
	echo >&2 "$PROG: $*"
	echo >&2 "usage: $PROG <source-directory> <dest-directory>"
	exit 1
}

[ "$#" -ge 2 ] ||
	usage 'Not enough arguments.'
[ "$#" -eq 2 ] ||
	usage 'Too many arguments.'

cd

srcdir0="$1"; shift
srcdir="$(validate_packages_dir "$srcdir0")"
srcdir="$(add_git_suffix "$srcdir")"

dstdir0="$1"; shift
dstdir="$(validate_packages_dir "$dstdir0")"
dstdir="$(add_git_suffix "$dstdir")"

[ -d "$srcdir" ] ||
	fatal "$srcdir0: source directory not available"
[ ! -e "$dstdir" ] ||
	fatal "$dstdir0: destination directory already exists"

cd "$srcdir"
cd
mkdir -- "$dstdir"
mv -T -- "$srcdir" "$dstdir"

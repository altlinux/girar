#!/bin/sh -efu

. girar-sh-functions

[ -n "${GIRAR_USER-}" ] ||
	fatal 'GIRAR_USER undefined'

usage()
{
	[ -z "$*" ] || message "$*"
	echo >&2 "usage: $PROG {new|add|ls|show|run|share|rm} ..."
	exit 1
}

if [ "$#" -lt 1 ]; then
	usage 'Not enough arguments.'
fi

op="$1"; shift

case "$op" in
	--help|help|'')
		usage ;;
	new|add|ls|show|run|share|rm)
		umask 002
		exec "$PROG-$op" "$@"
		;;
	*)
		usage "invalid operation: $op"
		;;
esac

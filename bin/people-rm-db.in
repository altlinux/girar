#!/bin/sh -efu

. "@CMDDIR@/giter-sh-functions"

PROG=giter-rm-db

usage()
{
	echo "$PROG: $*" >&2
	echo "usage: $PROG <directory>" >&2
	exit 1
}

[ "$#" -ge 1 ] ||
	usage 'Not enough arguments.'
[ "$#" -eq 1 ] ||
	usage 'Too many arguments.'

cd "$HOME/packages"

dir0="$1" && shift
dir="$(validate_packages_dir "$dir0")"
[ -d "$dir.git" ] ||
	fatal "$dir0: directory not available"
cd "$dir.git"
cd "$HOME/packages"
rm -rf -- "$dir.git"
